<% if @report.reported_item.present? %>
  <h2>通報詳細</h2>
  <%= render 'layouts/error_messages', resource: @report %>
  <% if @report.reported_item_type == "Comment" %>
    <%= link_to '該当コメントが付けられた投稿へ遷移', post_path(@report.reported_item.post) %>
    <!-- コメントの場合 -->
    <p><strong>コメント内容:</strong> <%= @report.reported_item.comment %></p>
  <% elsif @report.reported_item_type == "Post" %>
    <!-- 投稿の場合 -->
    <div class="post-detail">
      <div class="post-detail__image">
        <%= image_tag @report.reported_item.get_image(700, 700) %>
      </div>
      <div class="post-detail__content">
        <h2 class="post-detail__title"><%= @report.reported_item.title %></h2>
        <p><strong>別れの言葉:</strong> <%= @report.reported_item.body %></p>
      </div>
    </div>
    <%= link_to '該当の投稿ページへ遷移', post_path(@report.reported_item) %>
  <% end %>
  <p>通報理由: <%= @report.reason %></p>
  <p>通報日時: <%= @report.created_at.strftime('%Y/%m/%d %H:%M') %></p>
  <p>通報者: <%= @report.user.name %></p>
<% else %>
  <h2>通報された<%= @report.reported_item_type_ja %>は削除されました</h2>
  <p>通報理由: <%= @report.reason %></p>
  <p>通報日時: <%= @report.created_at.strftime('%Y/%m/%d %H:%M') %></p>
  <p>通報者: <%= @report.user.name %></p>
<% end %>

<% if @report.reported_item.present? %>
  <p>通報ステータス: <%= @report.status_i18n %></p>
  <%= form_with(model: @report, url: admin_report_path(@report)) do |f| %>
    <div class="form-field">
      <%= f.label :status, "ステータスの変更" %>
      <%= f.select :status, Report.statuses.keys.map { |k| [I18n.t("enums.report.status.#{k}"), k] } %>
    </div>
    <%= f.submit "更新" %>
  <% end %>
<% end %>
<%= link_to "この通報を削除", admin_report_path(@report), method: :delete %>