<div class="post-detail">
  <div class="post-detail__image">
    <%= image_tag @post.get_image(700, 700) %>
  </div>

  <div class="post-detail__content">
    <!-- 投稿タイトル -->
    <h2 class="post-detail__title">
      <% if !@post.is_public? %>
        <i class="fas fa-lock"></i>
      <% end %>
      <%= @post.title %>
    </h2>

    <p>一緒に過ごした期間：<%= @post.spend_time_i18n %></p>

    <div class="post-detail__description">
      <div class="description__title">
        <h4>別れの言葉</h3>
      </div>
      <%= @post.body %>
    </div>

    <!-- お花機能 -->
    <div id="flower-btn_<%= @post.id %>">
      <%= render "public/flowers/flower_btn", post: @post %>
    </div>

    <!-- 投稿ユーザー情報 -->
    <div class="post-detail__user-info">
      <div class="user-info__avatar">
        <%= image_tag @post.user.get_profile_image(150, 150) %>
      </div>
      <div class="user-info__details">
        <p class="user-info__name"><%= @post.user.name %></p>
        <p class="user-info__post-date">投稿日：<%= @post.created_at.strftime('%Y/%m/%d %H:%M') %></p>
      </div>
    </div>

    <!-- 編集ボタン -->
    <div class="edit-button-container">
      <% if @post.user == current_user %>
        <%= link_to '投稿を編集（削除）', edit_post_path(@post), class: 'edit-button' %>
      <% end %>
    </div>

    <!-- コメントゾーン -->
    <div class="post-detail__comment">
      <p>コメント（<%= @post.comments.count %>）</p>
      <% @post.comments.each do |comment| %>
        <!-- コメントリスト -->
        <div class="comment__list">
          <p class="comment__user-avatar">
            <%= image_tag comment.user.get_profile_image(120, 120) %>
          </p>
          <div class="comment__details">
            <div class="comment__user-name">
              <%= comment.user.name %>
            </div>
            <div class="comment__text-box">
              <p><%= comment.comment %></p>
              <% if comment.user == current_user %>
                <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete %>
              <% end %>
              <span class="comment__date"><%= comment.created_at.strftime('%Y/%m/%d %H:%M') %></span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="comment__form">
      <%= form_with(model: [@post, @comment], local: false) do |f| %>
        <%= f.text_area :comment, rows: '3', placeholder: "コメントをここに" %>
        <p><%= f.submit "送信する" %></p>
      <% end %>
    </div>
  </div>
</div>